class Admin::OrdersController < Admin::BaseController
  before_action :set_order, only: [:show, :destroy]

  def index
    @orders = Order.page(params[:page]).per(20)

    # Statistics for dashboard
    @stats = {
      total_orders: Order.count,
      pending_orders: Order.pending.count,
      processing_orders: Order.processing.count,
      paid_orders: Order.paid.count,
      failed_orders: Order.failed.count,
      total_revenue: Order.paid.sum(:amount),
      today_orders: Order.where(created_at: Date.current.all_day).count,
      today_revenue: Order.paid.where(created_at: Date.current.all_day).sum(:amount)
    }
  end

  def show
  end

  def destroy
    @order.destroy
    redirect_to admin_orders_path, notice: 'Order was successfully deleted.'
  end

  private

  def set_order
    @order = Order.find(params[:id])
  end
end
